--Query type: DML
EXEC sp_create_plan_guide @name = N'Guide7', @stmt = N'WITH EmployeeCTE AS ( SELECT EmployeeID, LastName, FirstName, Title, ManagerID FROM (VALUES (1, N'Smith', N'John', N'Manager', 3), (2, N'Johnson', N'Jane', N'Employee', 1), (3, N'Williams', N'Bob', N'Manager', NULL) ) AS Employee(EmployeeID, LastName, FirstName, Title, ManagerID) ), ContactCTE AS ( SELECT ContactID, LastName, FirstName FROM (VALUES (1, N'Smith', N'John'), (2, N'Johnson', N'Jane'), (3, N'Williams', N'Bob') ) AS Contact(ContactID, LastName, FirstName) ) SELECT e.LastName, e.FirstName, c.Title FROM EmployeeCTE AS e JOIN ContactCTE AS c ON e.EmployeeID = c.ContactID WHERE e.ManagerID = 3 OPTION (TABLE HINT (e, INDEX(IX_Employee_ManagerID), NOLOCK, FORCESEEK))', @type = N'SQL', @module_or_batch = NULL, @params = NULL, @hints = N'OPTION (TABLE HINT (e, INDEX(IX_Employee_ManagerID), NOLOCK, FORCESEEK))';
