--Query type: DML
EXEC sp_create_plan_guide @name = N'GuideDemo', @stmt = N'WITH EmployeeCTE AS ( SELECT 1 AS EmployeeID, 3 AS ManagerID, 1 AS ContactID, ''Title1'' AS Title UNION ALL SELECT 2 AS EmployeeID, 3 AS ManagerID, 2 AS ContactID, ''Title2'' AS Title UNION ALL SELECT 3 AS EmployeeID, 3 AS ManagerID, 3 AS ContactID, ''Title3'' AS Title ), ContactCTE AS ( SELECT 1 AS ContactID, ''LastName1'' AS LastName, ''FirstName1'' AS FirstName UNION ALL SELECT 2 AS ContactID, ''LastName2'' AS LastName, ''FirstName2'' AS FirstName UNION ALL SELECT 3 AS ContactID, ''LastName3'' AS LastName, ''FirstName3'' AS FirstName ) SELECT c.LastName, c.FirstName, e.Title FROM EmployeeCTE e INNER JOIN ContactCTE c ON e.ContactID = c.ContactID WHERE e.ManagerID = 3 ORDER BY c.LastName, c.FirstName;', @type = N'SQL', @module_or_batch = NULL, @params = NULL, @hints = N'OPTION (TABLE HINT( EmployeeCTE, FORCESEEK))';